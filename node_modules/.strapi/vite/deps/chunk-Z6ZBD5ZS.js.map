{
  "version": 3,
  "sources": ["../../../@strapi/admin/admin/src/components/NpsSurvey.tsx"],
  "sourcesContent": ["import * as React from 'react';\n\nimport {\n  Box,\n  Flex,\n  IconButton,\n  Button,\n  Typography,\n  Textarea,\n  Portal,\n  Field,\n  VisuallyHidden,\n  SingleSelect,\n  SingleSelectOption,\n} from '@strapi/design-system';\nimport { Cross } from '@strapi/icons';\nimport { Formik, Form } from 'formik';\nimport { useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\nimport * as yup from 'yup';\n\nimport { useAppInfo } from '../features/AppInfo';\nimport { useAuth } from '../features/Auth';\nimport { useNotification } from '../features/Notifications';\nimport { useIsMobile } from '../hooks/useMediaQuery';\nimport { usePersistentState } from '../hooks/usePersistentState';\n\nconst FieldWrapper = styled(Field.Root)`\n  height: 3.2rem;\n  width: 3.2rem;\n  align-items: center;\n  justify-content: center;\n\n  > label,\n  ~ input {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  > label {\n    color: inherit;\n    cursor: pointer;\n    padding: ${({ theme }) => theme.spaces[2]};\n    text-align: center;\n    vertical-align: middle;\n  }\n\n  &:hover,\n  &:focus-within {\n    background-color: ${({ theme }) => theme.colors.neutral0};\n  }\n\n  &:active,\n  &.selected {\n    color: ${({ theme }) => theme.colors.primary700};\n    background-color: ${({ theme }) => theme.colors.neutral0};\n    border-color: ${({ theme }) => theme.colors.primary700};\n  }\n`;\n\nconst delays = {\n  postResponse: 90 * 24 * 60 * 60 * 1000, // 90 days in ms\n  postFirstDismissal: 14 * 24 * 60 * 60 * 1000, // 14 days in ms\n  postSubsequentDismissal: 90 * 24 * 60 * 60 * 1000, // 90 days in ms\n  display: 30 * 60 * 1000, // 30 minutes in ms\n};\n\nconst ratingArray = [...Array(11).keys()];\n\nconst checkIfShouldShowSurvey = (settings: NpsSurveySettings) => {\n  const { enabled, lastResponseDate, firstDismissalDate, lastDismissalDate } = settings;\n\n  // This function goes through all the cases where we'd want to not show the survey:\n  // 1. If the survey is disabled by strapi, abort mission, don't bother checking the other settings.\n  // 2. If the survey is disabled by user, abort mission, don't bother checking the other settings.\n  // 3. If the user has already responded to the survey, check if enough time has passed since the last response.\n  // 4. If the user has dismissed the survey twice or more before, check if enough time has passed since the last dismissal.\n  // 5. If the user has only dismissed the survey once before, check if enough time has passed since the first dismissal.\n  // If none of these cases check out, then we show the survey.\n  // Note that submitting a response resets the dismissal counts.\n  // Checks 4 and 5 should not be reversed, since the first dismissal will also exist if the user has dismissed the survey twice or more before.\n\n  // For users who had created an account before the NPS feature was introduced,\n  // we assume that they would have enabled the NPS feature if they had the chance.\n\n  // Global strapi disable for NSP.\n  if (window.strapi.flags.nps === false) {\n    return false;\n  }\n\n  // User chose not to enable the NPS feature when signing up\n  if (enabled === false) {\n    return false;\n  }\n\n  // The user has already responded to the survey\n  if (lastResponseDate) {\n    const timeSinceLastResponse = Date.now() - new Date(lastResponseDate).getTime();\n\n    if (timeSinceLastResponse >= delays.postResponse) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // The user has dismissed the survey twice or more before\n  if (lastDismissalDate) {\n    const timeSinceLastDismissal = Date.now() - new Date(lastDismissalDate).getTime();\n\n    if (timeSinceLastDismissal >= delays.postSubsequentDismissal) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // The user has only dismissed the survey once before\n  if (firstDismissalDate) {\n    const timeSinceFirstDismissal = Date.now() - new Date(firstDismissalDate).getTime();\n\n    if (timeSinceFirstDismissal >= delays.postFirstDismissal) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // The user has not interacted with the survey before\n  return true;\n};\n\nconst NpsSurvey = () => {\n  const isMobile = useIsMobile();\n  const { formatMessage } = useIntl();\n  const { npsSurveySettings, setNpsSurveySettings } = useNpsSurveySettings();\n  const [isFeedbackResponse, setIsFeedbackResponse] = React.useState(false);\n  const { toggleNotification } = useNotification();\n  const currentEnvironment = useAppInfo('NpsSurvey', (state) => state.currentEnvironment);\n  const strapiVersion = useAppInfo('NpsSurvey', (state) => state.strapiVersion);\n\n  interface NpsSurveyMutationBody {\n    email: string;\n    rating: number | null;\n    comment: string;\n    environment?: string;\n    version?: string;\n    license: 'Enterprise' | 'Community';\n  }\n\n  // Only check on first render if the survey should be shown\n  const [surveyIsShown, setSurveyIsShown] = React.useState(\n    checkIfShouldShowSurvey(npsSurveySettings)\n  );\n\n  // Set a cooldown to show the survey when session begins\n  const [displaySurvey, setDisplaySurvey] = React.useState(false);\n\n  React.useEffect(() => {\n    const displayTime = setTimeout(() => {\n      setDisplaySurvey(true);\n    }, delays.display);\n\n    return () => {\n      clearTimeout(displayTime);\n    };\n  }, []);\n\n  const { user } = useAuth('NpsSurvey', (auth) => auth);\n\n  if (!displaySurvey) {\n    return null;\n  }\n\n  if (!surveyIsShown) {\n    return null;\n  }\n\n  const handleSubmitResponse = async ({\n    npsSurveyRating,\n    npsSurveyFeedback,\n  }: {\n    npsSurveyRating: NpsSurveyMutationBody['rating'];\n    npsSurveyFeedback: NpsSurveyMutationBody['comment'];\n  }) => {\n    try {\n      const body = {\n        email: typeof user === 'object' && user.email ? user.email : '',\n        rating: npsSurveyRating,\n        comment: npsSurveyFeedback,\n        environment: currentEnvironment,\n        version: strapiVersion ?? undefined,\n        license: window.strapi.projectType,\n        isHostedOnStrapiCloud: process.env.STRAPI_HOSTING === 'strapi.cloud',\n      };\n      const res = await fetch(\n        `${process.env.STRAPI_ANALYTICS_URL || 'https://analytics.strapi.io'}/submit-nps`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(body),\n        }\n      );\n\n      if (!res.ok) {\n        throw new Error('Failed to submit NPS survey');\n      }\n\n      setNpsSurveySettings((settings) => ({\n        ...settings,\n        lastResponseDate: new Date().toString(),\n        firstDismissalDate: null,\n        lastDismissalDate: null,\n      }));\n      setIsFeedbackResponse(true);\n      // Thank you message displayed in the banner should disappear after few seconds.\n      setTimeout(() => {\n        setSurveyIsShown(false);\n      }, 3000);\n    } catch (err) {\n      toggleNotification({\n        type: 'danger',\n        message: formatMessage({ id: 'notification.error', defaultMessage: 'An error occurred' }),\n      });\n    }\n  };\n\n  const handleDismiss = () => {\n    setNpsSurveySettings((settings) => {\n      const nextSettings = {\n        ...settings,\n        lastResponseDate: null,\n      };\n\n      if (settings.firstDismissalDate) {\n        // If the user dismisses the survey for the second time\n        nextSettings.lastDismissalDate = new Date().toString();\n      } else {\n        // If the user dismisses the survey for the first time\n        nextSettings.firstDismissalDate = new Date().toString();\n      }\n\n      return nextSettings;\n    });\n\n    setSurveyIsShown(false);\n  };\n\n  return (\n    <Portal>\n      <Formik\n        initialValues={{ npsSurveyFeedback: '', npsSurveyRating: null }}\n        onSubmit={handleSubmitResponse}\n        validationSchema={yup.object({\n          npsSurveyFeedback: yup.string(),\n          npsSurveyRating: yup.number().required(),\n        })}\n      >\n        {({ values, handleChange, setFieldValue, isSubmitting }) => (\n          <Form name=\"npsSurveyForm\">\n            <Box\n              padding={4}\n              position=\"fixed\"\n              bottom={0}\n              left=\"50%\"\n              transform=\"translateX(-50%)\"\n              zIndex=\"200\"\n              minWidth={{ initial: '100%', medium: '50%' }}\n            >\n              <Flex\n                hasRadius\n                direction=\"column\"\n                padding={4}\n                borderColor=\"primary200\"\n                background=\"neutral0\"\n                shadow=\"popupShadow\"\n                wrap=\"wrap\"\n              >\n                {isFeedbackResponse ? (\n                  <Typography fontWeight=\"semiBold\">\n                    {formatMessage({\n                      id: 'app.components.NpsSurvey.feedback-response',\n                      defaultMessage: 'Thank you very much for your feedback!',\n                    })}\n                  </Typography>\n                ) : (\n                  <Box tag=\"fieldset\" width=\"100%\" borderWidth={0}>\n                    <Flex justifyContent=\"space-between\" width=\"100%\" gap={2}>\n                      <Box marginLeft=\"auto\" marginRight=\"auto\">\n                        <Typography fontWeight=\"semiBold\" tag=\"legend\">\n                          {formatMessage({\n                            id: 'app.components.NpsSurvey.banner-title',\n                            defaultMessage:\n                              'How likely are you to recommend Strapi to a friend or colleague?',\n                          })}\n                        </Typography>\n                      </Box>\n                      <IconButton\n                        onClick={handleDismiss}\n                        withTooltip={false}\n                        label={formatMessage({\n                          id: 'app.components.NpsSurvey.dismiss-survey-label',\n                          defaultMessage: 'Dismiss survey',\n                        })}\n                        type=\"button\"\n                      >\n                        <Cross />\n                      </IconButton>\n                    </Flex>\n                    {isMobile ? (\n                      <Box marginTop={2}>\n                        <SingleSelect\n                          placeholder={formatMessage({\n                            id: 'app.components.NpsSurvey.select-rating',\n                            defaultMessage: 'Select rating',\n                          })}\n                          onChange={(value) => {\n                            setFieldValue('npsSurveyRating', parseInt(value.toString(), 10));\n                          }}\n                          value={values.npsSurveyRating}\n                        >\n                          {ratingArray\n                            .sort((a, b) => b - a)\n                            .map((number) => {\n                              const suffixMessage =\n                                number === 0\n                                  ? formatMessage({\n                                      id: 'app.components.NpsSurvey.no-recommendation',\n                                      defaultMessage: 'Not at all likely',\n                                    })\n                                  : number === 10\n                                    ? formatMessage({\n                                        id: 'app.components.NpsSurvey.happy-to-recommend',\n                                        defaultMessage: 'Extremely likely',\n                                      })\n                                    : '';\n                              return (\n                                <SingleSelectOption key={number} value={number}>\n                                  {number} {suffixMessage && `(${suffixMessage})`}\n                                </SingleSelectOption>\n                              );\n                            })}\n                        </SingleSelect>\n                      </Box>\n                    ) : (\n                      <Flex gap={2} marginTop={2} marginBottom={2} justifyContent=\"center\">\n                        <Typography variant=\"pi\" textColor=\"neutral600\">\n                          {formatMessage({\n                            id: 'app.components.NpsSurvey.no-recommendation',\n                            defaultMessage: 'Not at all likely',\n                          })}\n                        </Typography>\n                        {ratingArray.map((number) => {\n                          return (\n                            <FieldWrapper\n                              key={number}\n                              name=\"npsSurveyRating\"\n                              className={values.npsSurveyRating === number ? 'selected' : undefined} // \"selected\" class added when child radio button is checked\n                              hasRadius\n                              background=\"primary100\"\n                              borderColor=\"primary200\"\n                              color=\"primary600\"\n                              position=\"relative\"\n                              cursor=\"pointer\"\n                            >\n                              <Field.Label>\n                                <VisuallyHidden>\n                                  <Field.Input\n                                    type=\"radio\"\n                                    checked={values.npsSurveyRating === number}\n                                    onChange={(e) =>\n                                      setFieldValue('npsSurveyRating', parseInt(e.target.value, 10))\n                                    }\n                                    value={number}\n                                  />\n                                </VisuallyHidden>\n                                {number}\n                              </Field.Label>\n                            </FieldWrapper>\n                          );\n                        })}\n                        <Typography variant=\"pi\" textColor=\"neutral600\">\n                          {formatMessage({\n                            id: 'app.components.NpsSurvey.happy-to-recommend',\n                            defaultMessage: 'Extremely likely',\n                          })}\n                        </Typography>\n                      </Flex>\n                    )}\n                    {values.npsSurveyRating !== null && (\n                      <Flex direction=\"column\" alignItems=\"stretch\">\n                        <Box marginTop={2}>\n                          <Field.Label fontWeight=\"semiBold\" fontSize={2}>\n                            {formatMessage({\n                              id: 'app.components.NpsSurvey.feedback-question',\n                              defaultMessage: 'Do you have any suggestion for improvements?',\n                            })}\n                          </Field.Label>\n                        </Box>\n                        <Box marginTop={3} marginBottom={4} width=\"100%\">\n                          <Textarea\n                            id=\"npsSurveyFeedback\" // formik element attribute \"id\" should be same as the values key to work\n                            width=\"100%\"\n                            onChange={handleChange}\n                            value={values.npsSurveyFeedback}\n                          />\n                        </Box>\n                        <Box>\n                          <Button marginBottom={2} type=\"submit\" loading={isSubmitting}>\n                            {formatMessage({\n                              id: 'app.components.NpsSurvey.submit-feedback',\n                              defaultMessage: 'Submit Feedback',\n                            })}\n                          </Button>\n                        </Box>\n                      </Flex>\n                    )}\n                  </Box>\n                )}\n              </Flex>\n            </Box>\n          </Form>\n        )}\n      </Formik>\n    </Portal>\n  );\n};\n\ninterface NpsSurveySettings {\n  enabled: boolean;\n  lastResponseDate: string | null;\n  firstDismissalDate: string | null;\n  lastDismissalDate: string | null;\n}\n\n/**\n * We exported to make it available during admin user registration.\n * Because we only enable the NPS for users who subscribe to the newsletter when signing up\n */\nfunction useNpsSurveySettings() {\n  const [npsSurveySettings, setNpsSurveySettings] = usePersistentState<NpsSurveySettings>(\n    'STRAPI_NPS_SURVEY_SETTINGS',\n    {\n      enabled: true,\n      lastResponseDate: null,\n      firstDismissalDate: null,\n      lastDismissalDate: null,\n    }\n  );\n\n  /**\n   * TODO: should this just be an array so we can alias the `usePersistentState` hook?\n   */\n  return { npsSurveySettings, setNpsSurveySettings };\n}\n\nexport { NpsSurvey, useNpsSurveySettings };\n"],
  "mappings": "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",
  "names": ["FieldWrapper", "styled", "Field", "Root", "theme", "spaces", "colors", "neutral0", "primary700", "delays", "postResponse", "postFirstDismissal", "postSubsequentDismissal", "display", "ratingArray", "Array", "keys", "checkIfShouldShowSurvey", "settings", "enabled", "lastResponseDate", "firstDismissalDate", "lastDismissalDate", "window", "strapi", "flags", "nps", "timeSinceLastResponse", "Date", "now", "getTime", "timeSinceLastDismissal", "timeSinceFirstDismissal", "NpsSurvey", "isMobile", "useIsMobile", "formatMessage", "useIntl", "npsSurveySettings", "setNpsSurveySettings", "useNpsSurveySettings", "isFeedbackResponse", "setIsFeedbackResponse", "useState", "toggleNotification", "useNotification", "currentEnvironment", "useAppInfo", "state", "strapiVersion", "surveyIsShown", "setSurveyIsShown", "displaySurvey", "setDisplaySurvey", "React", "useEffect", "displayTime", "setTimeout", "clearTimeout", "user", "useAuth", "auth", "handleSubmitResponse", "npsSurveyRating", "npsSurveyFeedback", "body", "email", "rating", "comment", "environment", "version", "undefined", "license", "projectType", "isHostedOnStrapiCloud", "process", "env", "STRAPI_HOSTING", "res", "fetch", "STRAPI_ANALYTICS_URL", "method", "headers", "JSON", "stringify", "ok", "Error", "toString", "err", "type", "message", "id", "defaultMessage", "handleDismiss", "nextSettings", "_jsx", "Portal", "Formik", "initialValues", "onSubmit", "validationSchema", "object", "string", "number", "required", "values", "handleChange", "setFieldValue", "isSubmitting", "Form", "name", "Box", "padding", "position", "bottom", "left", "transform", "zIndex", "minWidth", "initial", "medium", "Flex", "hasRadius", "direction", "borderColor", "background", "shadow", "wrap", "Typography", "fontWeight", "_jsxs", "tag", "width", "borderWidth", "justifyContent", "gap", "marginLeft", "marginRight", "IconButton", "onClick", "withTooltip", "label", "Cross", "marginTop", "SingleSelect", "placeholder", "onChange", "value", "parseInt", "sort", "a", "b", "map", "suffixMessage", "SingleSelectOption", "marginBottom", "variant", "textColor", "className", "color", "cursor", "Label", "VisuallyHidden", "Input", "checked", "e", "target", "alignItems", "fontSize", "Textarea", "Button", "loading", "usePersistentState"]
}
