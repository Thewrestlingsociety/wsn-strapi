{
  "version": 3,
  "sources": ["../../../@strapi/upload/admin/src/hooks/useAIMetadataJob.ts", "../../../@strapi/upload/admin/src/pages/SettingsPage/init.ts", "../../../@strapi/upload/admin/src/pages/SettingsPage/reducer.ts", "../../../@strapi/upload/admin/src/pages/SettingsPage/SettingsPage.tsx"],
  "sourcesContent": ["import * as React from 'react';\n\nimport { useFetchClient, useNotification } from '@strapi/admin/strapi-admin';\nimport { useIntl } from 'react-intl';\nimport { useQuery, useQueryClient } from 'react-query';\n\nimport { AIMetadataJob } from '../../../shared/contracts/ai-metadata-jobs';\nimport { getTrad } from '../utils';\n\nconst fetchLatestJob = async (\n  get: ReturnType<typeof useFetchClient>['get']\n): Promise<AIMetadataJob | null> => {\n  try {\n    const { data } = await get('/upload/actions/generate-ai-metadata/latest');\n    return data;\n  } catch {\n    // Return null on any error - UI treats this as \"no active job\"\n    return null;\n  }\n};\n\nexport const useAIMetadataJob = (options?: { enabled?: boolean }) => {\n  const { get } = useFetchClient();\n  const { toggleNotification } = useNotification();\n  const { formatMessage } = useIntl();\n  const queryClient = useQueryClient();\n  const enabled = options?.enabled ?? true;\n\n  const [previousJobStatus, setPreviousJobStatus] = React.useState<AIMetadataJob['status'] | null>(\n    null\n  );\n\n  // Single query with conditional polling\n  const { data: job, refetch } = useQuery<AIMetadataJob | null, { message: string }>(\n    ['ai-metadata-latest-job'],\n    () => fetchLatestJob(get),\n    {\n      enabled,\n      // Poll every second when job is processing\n      refetchInterval: (data) => {\n        // If no data yet, don't poll\n        if (!data) return false;\n\n        // Poll while processing\n        if (data.status === 'processing') {\n          return 1000;\n        }\n\n        // Stop polling when completed or failed\n        return false;\n      },\n      retry: false,\n      refetchOnWindowFocus: false,\n    }\n  );\n\n  const currentJobStatus = job?.status ?? null;\n\n  // Detect status transitions and show notifications\n  React.useEffect(() => {\n    if (!currentJobStatus) return;\n\n    // Detect transition from active state to completed\n    if (previousJobStatus === 'processing' && currentJobStatus === 'completed') {\n      toggleNotification({\n        type: 'success',\n        message: formatMessage({\n          id: getTrad('settings.form.aiMetadata.job-completed'),\n          defaultMessage: 'Successfully generated metadata',\n        }),\n      });\n      // Invalidate metadata count query to refresh the count\n      queryClient.invalidateQueries(['ai-metadata-count']);\n    }\n\n    // Detect transition from active state to failed\n    if (previousJobStatus === 'processing' && currentJobStatus === 'failed') {\n      toggleNotification({\n        type: 'danger',\n        message: formatMessage({\n          id: getTrad('settings.form.aiMetadata.job-failed'),\n          defaultMessage: 'Failed to generate metadata. Please try again.',\n        }),\n      });\n    }\n\n    // Update previous status if it changed\n    if (previousJobStatus !== currentJobStatus) {\n      setPreviousJobStatus(currentJobStatus);\n    }\n  }, [currentJobStatus, previousJobStatus, toggleNotification, formatMessage, queryClient]);\n\n  return {\n    data: job,\n    refetch,\n  };\n};\n", "import type { InitialState } from './reducer';\n\nexport const init = (initialState: InitialState) => {\n  return initialState;\n};\n", "import { produce } from 'immer';\nimport set from 'lodash/set';\n\nimport { SettingsData } from '../../../../shared/contracts/settings';\n\nconst initialData: SettingsData = {\n  responsiveDimensions: true,\n  sizeOptimization: true,\n  autoOrientation: false,\n  videoPreview: false,\n  aiMetadata: true,\n};\n\nexport type InitialState = {\n  initialData: SettingsData | null;\n  modifiedData: SettingsData | null;\n};\n\ninterface ActionGetDataSucceeded {\n  type: 'GET_DATA_SUCCEEDED';\n  data: InitialState['initialData'];\n}\n\ninterface ActionOnChange {\n  type: 'ON_CHANGE';\n  keys: keyof NonNullable<InitialState['initialData']>;\n  value: boolean;\n}\n\nexport type Action = ActionGetDataSucceeded | ActionOnChange;\n\nconst initialState: InitialState = {\n  initialData,\n  modifiedData: { ...initialData },\n};\n\nconst reducer = (state: InitialState, action: Action) =>\n  produce(state, (drafState) => {\n    switch (action.type) {\n      case 'GET_DATA_SUCCEEDED': {\n        drafState.initialData = action.data;\n        drafState.modifiedData = action.data;\n        break;\n      }\n      case 'ON_CHANGE': {\n        set(drafState, ['modifiedData', ...action.keys.split('.')], action.value);\n        break;\n      }\n      default:\n        return state;\n    }\n  });\n\nexport { initialState, reducer };\n", "// TODO: find a better naming convention for the file that was an index file before\nimport * as React from 'react';\n\nimport {\n  Page,\n  useNotification,\n  useFetchClient,\n  Layouts,\n  ConfirmDialog,\n} from '@strapi/admin/strapi-admin';\nimport { useAIAvailability } from '@strapi/admin/strapi-admin/ee';\nimport {\n  Box,\n  Button,\n  Dialog,\n  Flex,\n  Grid,\n  Toggle,\n  Typography,\n  Field,\n  Status,\n  Divider,\n  StatusProps,\n  TextButton,\n} from '@strapi/design-system';\nimport { Check, Sparkle } from '@strapi/icons';\nimport isEqual from 'lodash/isEqual';\nimport { useIntl } from 'react-intl';\nimport { useMutation, useQuery } from 'react-query';\n\nimport { AIMetadataJob } from '../../../../shared/contracts/ai-metadata-jobs';\nimport { GetAIMetadataCount, GenerateAIMetadata } from '../../../../shared/contracts/files';\nimport { UpdateSettings } from '../../../../shared/contracts/settings';\nimport { PERMISSIONS } from '../../constants';\nimport { useAIMetadataJob } from '../../hooks/useAIMetadataJob';\nimport { useSettings } from '../../hooks/useSettings';\nimport { useTracking } from '../../hooks/useTracking';\nimport { getTrad } from '../../utils';\n\nimport { init } from './init';\nimport { initialState, reducer } from './reducer';\n\nimport type { InitialState } from './reducer';\n\n/* -------------------------------------------------------------------------------------------------\n * MetadataAction\n * -----------------------------------------------------------------------------------------------*/\n\nconst BetaStatus = (props: Omit<StatusProps, 'children'>) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Status\n      size=\"S\"\n      variant=\"secondary\"\n      style={{ textTransform: 'uppercase', display: 'flex' }}\n      {...props}\n    >\n      <Typography tag=\"span\" variant=\"pi\" fontWeight=\"bold\">\n        {formatMessage({\n          id: 'app.components.Status.beta',\n          defaultMessage: 'Beta',\n        })}\n      </Typography>\n    </Status>\n  );\n};\n\ninterface MetadataActionProps {\n  job: AIMetadataJob | null;\n  imagesWithoutMetadataCount: number;\n  isConfirmDialogOpen: boolean;\n  onConfirmDialogChange: (open: boolean) => void;\n  onGenerate: () => Promise<void>;\n}\n\nconst MetadataAction = ({\n  job,\n  imagesWithoutMetadataCount,\n  isConfirmDialogOpen,\n  onConfirmDialogChange,\n  onGenerate,\n}: MetadataActionProps) => {\n  const { formatMessage } = useIntl();\n\n  // If there's an active job processing\n  if (job?.status === 'processing') {\n    return (\n      <Flex gap={2} alignItems=\"center\">\n        <Typography variant=\"pi\" textColor=\"neutral600\">\n          {formatMessage({\n            id: getTrad('settings.form.aiMetadata.generatingMetadata'),\n            defaultMessage: 'AI is generating your metadata',\n          })}\n        </Typography>\n      </Flex>\n    );\n  }\n\n  // Only show completed state when all images have metadata\n  if (imagesWithoutMetadataCount === 0) {\n    return (\n      <Typography variant=\"pi\" textColor=\"primary600\">\n        <Flex gap={2} alignItems=\"center\">\n          <Check width=\"16px\" height=\"16px\" />\n          {formatMessage({\n            id: getTrad('settings.form.aiMetadata.metadataGenerated'),\n            defaultMessage: 'Your metadata has been generated',\n          })}\n        </Flex>\n      </Typography>\n    );\n  }\n\n  return (\n    <Dialog.Root open={isConfirmDialogOpen} onOpenChange={onConfirmDialogChange}>\n      <Dialog.Trigger>\n        <TextButton disabled={imagesWithoutMetadataCount === 0}>\n          {formatMessage({\n            id: getTrad('settings.form.aiMetadata.generateButton'),\n            defaultMessage: 'Generate metadata',\n          })}\n        </TextButton>\n      </Dialog.Trigger>\n      <ConfirmDialog\n        variant=\"success-light\"\n        onConfirm={onGenerate}\n        title={\n          <Flex gap={2}>\n            <BetaStatus />\n            {formatMessage({\n              id: getTrad('settings.form.aiMetadata.confirmDialog.title'),\n              defaultMessage: 'Generate AI Metadata',\n            })}\n          </Flex>\n        }\n      >\n        {formatMessage(\n          {\n            id: getTrad('settings.form.aiMetadata.confirmDialog.message'),\n            defaultMessage:\n              'This will start a process in the background to generate captions and alternative text for {count, plural, one {# image} other {# images}}. AI can make mistakes, be sure to review the generated content.',\n          },\n          { count: imagesWithoutMetadataCount }\n        )}\n      </ConfirmDialog>\n    </Dialog.Root>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * SettingsPage\n * -----------------------------------------------------------------------------------------------*/\n\nexport const SettingsPage = () => {\n  const { formatMessage } = useIntl();\n  const { toggleNotification } = useNotification();\n  const { put, post, get } = useFetchClient();\n  const [isConfirmDialogOpen, setIsConfirmDialogOpen] = React.useState(false);\n  const { trackUsage } = useTracking();\n\n  const [{ initialData, modifiedData }, dispatch] = React.useReducer(reducer, initialState, init);\n\n  const { data, isLoading, refetch } = useSettings();\n  const isAIAvailable = useAIAvailability();\n\n  const { data: imageCountResponse, isLoading: isLoadingImagesWithoutMetadataCount } = useQuery<\n    GetAIMetadataCount.Response['data'],\n    GetAIMetadataCount.Response['error']\n  >(\n    ['ai-metadata-count'],\n    async () => {\n      const { data } = await get('/upload/actions/generate-ai-metadata/count');\n      return data;\n    },\n    {\n      enabled: isAIAvailable && !!data?.aiMetadata,\n      retry: false,\n    }\n  );\n\n  const imagesWithoutMetadataCount = imageCountResponse?.imagesWithoutMetadataCount ?? 0;\n\n  React.useEffect(() => {\n    if (data) {\n      dispatch({\n        type: 'GET_DATA_SUCCEEDED',\n        data,\n      });\n    }\n  }, [data]);\n\n  const isSaveButtonDisabled = isEqual(initialData, modifiedData);\n\n  const { mutateAsync, isLoading: isSubmitting } = useMutation<\n    UpdateSettings.Response['data'],\n    UpdateSettings.Response['error'],\n    UpdateSettings.Request['body']\n  >(\n    async (body) => {\n      const { data } = await put('/upload/settings', body);\n\n      return data;\n    },\n    {\n      onSuccess() {\n        refetch();\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({ id: 'notification.form.success.fields' }),\n        });\n      },\n      onError(err: any) {\n        toggleNotification({\n          type: 'danger',\n          message: err.message || formatMessage({ id: 'notification.error' }),\n        });\n      },\n    }\n  );\n\n  // Poll for latest active job - notifications are handled inside the hook\n  const { data: aiMetadataJob, refetch: refetchAiMetadataJob } = useAIMetadataJob({\n    enabled: isAIAvailable,\n  });\n\n  const { mutateAsync: startGenerateAIMetadata } = useMutation<\n    GenerateAIMetadata.Response['data'],\n    GenerateAIMetadata.Response['error'],\n    void\n  >(\n    async () => {\n      const { data } = await post('/upload/actions/generate-ai-metadata', {});\n      return data;\n    },\n    {\n      onSuccess() {\n        setIsConfirmDialogOpen(false);\n        // Refetch job status to start polling the new job\n        refetchAiMetadataJob();\n      },\n      onError(err) {\n        toggleNotification({\n          type: 'danger',\n          message: (err as Error)?.message || formatMessage({ id: 'notification.error' }),\n        });\n        setIsConfirmDialogOpen(false);\n      },\n    }\n  );\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if (isSaveButtonDisabled) {\n      return;\n    }\n\n    await mutateAsync(modifiedData!);\n  };\n\n  const handleChange = ({\n    target: { name, value },\n  }: {\n    target: { name: keyof NonNullable<InitialState['initialData']>; value: boolean };\n  }) => {\n    dispatch({\n      type: 'ON_CHANGE',\n      keys: name,\n      value,\n    });\n  };\n\n  if (isLoading) {\n    return <Page.Loading />;\n  }\n\n  return (\n    <Page.Main tabIndex={-1}>\n      <Page.Title>\n        {formatMessage({\n          id: getTrad('page.title'),\n          defaultMessage: 'Settings - Media Library',\n        })}\n      </Page.Title>\n      <form onSubmit={handleSubmit}>\n        <Layouts.Header\n          title={formatMessage({\n            id: getTrad('settings.header.label'),\n            defaultMessage: 'Media Library',\n          })}\n          primaryAction={\n            <Button\n              disabled={isSaveButtonDisabled}\n              loading={isSubmitting}\n              type=\"submit\"\n              startIcon={<Check />}\n              size=\"S\"\n              fullWidth\n            >\n              {formatMessage({\n                id: 'global.save',\n                defaultMessage: 'Save',\n              })}\n            </Button>\n          }\n          subtitle={formatMessage({\n            id: getTrad('settings.sub-header.label'),\n            defaultMessage: 'Configure the settings for the Media Library',\n          })}\n        />\n        <Layouts.Content>\n          <Layouts.Root>\n            <Flex direction=\"column\" alignItems=\"stretch\" gap={4}>\n              {/* AI features section when ai is available */}\n              {isAIAvailable && (\n                <Box background=\"neutral0\" padding={6} shadow=\"filterShadow\" hasRadius>\n                  <Flex direction=\"column\" alignItems=\"stretch\" gap={1}>\n                    <Grid.Root gap={6}>\n                      <Grid.Item col={8} xs={12} direction=\"column\" alignItems=\"stretch\">\n                        <Flex gap={2}>\n                          <Box color=\"alternative700\">\n                            <Sparkle />\n                          </Box>\n                          <Typography variant=\"delta\" tag=\"h2\">\n                            {formatMessage({\n                              id: getTrad('settings.form.aiMetadata.label'),\n                              defaultMessage:\n                                'Generate AI captions and alt texts automatically on upload!',\n                            })}\n                          </Typography>\n                        </Flex>\n                        <Flex paddingTop={1}>\n                          <Typography variant=\"pi\" textColor=\"neutral600\">\n                            {formatMessage({\n                              id: getTrad('settings.form.aiMetadata.description'),\n                              defaultMessage:\n                                'Enable this feature to save time, optimize your SEO and increase accessibility by letting our AI generate captions and alternative texts for you.',\n                            })}\n                          </Typography>\n                        </Flex>\n                      </Grid.Item>\n                      <Grid.Item\n                        col={4}\n                        xs={12}\n                        direction=\"column\"\n                        alignItems=\"end\"\n                        justifyContent={'center'}\n                      >\n                        <Field.Root name=\"aiMetadata\" minWidth=\"200px\">\n                          <Toggle\n                            checked={modifiedData?.aiMetadata}\n                            offLabel={formatMessage({\n                              id: 'app.components.ToggleCheckbox.disabled-label',\n                              defaultMessage: 'Disabled',\n                            })}\n                            onLabel={formatMessage({\n                              id: 'app.components.ToggleCheckbox.enabled-label',\n                              defaultMessage: 'Enabled',\n                            })}\n                            onChange={(e) => {\n                              handleChange({\n                                target: { name: 'aiMetadata', value: e.target.checked },\n                              });\n                            }}\n                          />\n                        </Field.Root>\n                      </Grid.Item>\n                    </Grid.Root>\n                    {/* Retroactive metadata generation when aiMetadata is enabled */}\n                    {initialData?.aiMetadata &&\n                      !isLoadingImagesWithoutMetadataCount &&\n                      Boolean(imageCountResponse?.totalImages) && (\n                        <>\n                          <Divider marginTop={4} marginBottom={4} />\n                          <Flex justifyContent=\"space-between\" alignItems=\"center\" gap={2}>\n                            <Flex gap={2}>\n                              <BetaStatus size=\"XS\" />\n                              <Typography variant=\"pi\" textColor=\"neutral500\">\n                                {imagesWithoutMetadataCount === 0\n                                  ? formatMessage({\n                                      id: getTrad('settings.form.aiMetadata.allAssetsHaveMetadata'),\n                                      defaultMessage: 'All assets have caption and alt text',\n                                    })\n                                  : formatMessage(\n                                      {\n                                        id: getTrad(\n                                          'settings.form.aiMetadata.imagesWithoutMetadata'\n                                        ),\n                                        defaultMessage:\n                                          '{count, plural, one {# image lacks captions or alternative text} other {# images lack captions or alternative text}}',\n                                      },\n                                      { count: imagesWithoutMetadataCount }\n                                    )}\n                              </Typography>\n                            </Flex>\n                            <MetadataAction\n                              job={aiMetadataJob ?? null}\n                              imagesWithoutMetadataCount={imagesWithoutMetadataCount}\n                              isConfirmDialogOpen={isConfirmDialogOpen}\n                              onConfirmDialogChange={setIsConfirmDialogOpen}\n                              onGenerate={async () => {\n                                await startGenerateAIMetadata();\n                                trackUsage('didGenerateMetadataRetroactively');\n                              }}\n                            />\n                          </Flex>\n                        </>\n                      )}\n                  </Flex>\n                </Box>\n              )}\n\n              <Box background=\"neutral0\" padding={6} shadow=\"filterShadow\" hasRadius>\n                <Flex direction=\"column\" alignItems=\"stretch\" gap={4}>\n                  <Flex>\n                    <Typography variant=\"delta\" tag=\"h2\">\n                      {formatMessage({\n                        id: getTrad('settings.blockTitle'),\n                        defaultMessage: 'Asset management',\n                      })}\n                    </Typography>\n                  </Flex>\n                  <Grid.Root gap={6}>\n                    <Grid.Item col={6} xs={12} direction=\"column\" alignItems=\"stretch\">\n                      <Field.Root\n                        hint={formatMessage({\n                          id: getTrad('settings.form.responsiveDimensions.description'),\n                          defaultMessage:\n                            'Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset.',\n                        })}\n                        name=\"responsiveDimensions\"\n                      >\n                        <Field.Label>\n                          {formatMessage({\n                            id: getTrad('settings.form.responsiveDimensions.label'),\n                            defaultMessage: 'Responsive friendly upload',\n                          })}\n                        </Field.Label>\n                        <Toggle\n                          checked={modifiedData?.responsiveDimensions}\n                          offLabel={formatMessage({\n                            id: 'app.components.ToggleCheckbox.off-label',\n                            defaultMessage: 'Off',\n                          })}\n                          onLabel={formatMessage({\n                            id: 'app.components.ToggleCheckbox.on-label',\n                            defaultMessage: 'On',\n                          })}\n                          onChange={(e) => {\n                            handleChange({\n                              target: { name: 'responsiveDimensions', value: e.target.checked },\n                            });\n                          }}\n                        />\n                        <Field.Hint />\n                      </Field.Root>\n                    </Grid.Item>\n                    <Grid.Item col={6} xs={12} direction=\"column\" alignItems=\"stretch\">\n                      <Field.Root\n                        hint={formatMessage({\n                          id: getTrad('settings.form.sizeOptimization.description'),\n                          defaultMessage:\n                            'Enabling this option will reduce the image size and slightly reduce its quality.',\n                        })}\n                        name=\"sizeOptimization\"\n                      >\n                        <Field.Label>\n                          {formatMessage({\n                            id: getTrad('settings.form.sizeOptimization.label'),\n                            defaultMessage: 'Size optimization',\n                          })}\n                        </Field.Label>\n                        <Toggle\n                          checked={modifiedData?.sizeOptimization}\n                          offLabel={formatMessage({\n                            id: 'app.components.ToggleCheckbox.off-label',\n                            defaultMessage: 'Off',\n                          })}\n                          onLabel={formatMessage({\n                            id: 'app.components.ToggleCheckbox.on-label',\n                            defaultMessage: 'On',\n                          })}\n                          onChange={(e) => {\n                            handleChange({\n                              target: { name: 'sizeOptimization', value: e.target.checked },\n                            });\n                          }}\n                        />\n                        <Field.Hint />\n                      </Field.Root>\n                    </Grid.Item>\n                    <Grid.Item col={6} xs={12} direction=\"column\" alignItems=\"stretch\">\n                      <Field.Root\n                        hint={formatMessage({\n                          id: getTrad('settings.form.autoOrientation.description'),\n                          defaultMessage:\n                            'Enabling this option will automatically rotate the image according to EXIF orientation tag.',\n                        })}\n                        name=\"autoOrientation\"\n                      >\n                        <Field.Label>\n                          {formatMessage({\n                            id: getTrad('settings.form.autoOrientation.label'),\n                            defaultMessage: 'Auto orientation',\n                          })}\n                        </Field.Label>\n                        <Toggle\n                          checked={modifiedData?.autoOrientation}\n                          offLabel={formatMessage({\n                            id: 'app.components.ToggleCheckbox.off-label',\n                            defaultMessage: 'Off',\n                          })}\n                          onLabel={formatMessage({\n                            id: 'app.components.ToggleCheckbox.on-label',\n                            defaultMessage: 'On',\n                          })}\n                          onChange={(e) => {\n                            handleChange({\n                              target: { name: 'autoOrientation', value: e.target.checked },\n                            });\n                          }}\n                        />\n                        <Field.Hint />\n                      </Field.Root>\n                    </Grid.Item>\n                  </Grid.Root>\n                </Flex>\n              </Box>\n            </Flex>\n          </Layouts.Root>\n        </Layouts.Content>\n      </form>\n    </Page.Main>\n  );\n};\n\nexport const ProtectedSettingsPage = () => (\n  <Page.Protect permissions={PERMISSIONS.settings}>\n    <SettingsPage />\n  </Page.Protect>\n);\n"],
  "mappings": "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",
  "names": ["fetchLatestJob", "get", "data", "useAIMetadataJob", "options", "useFetchClient", "toggleNotification", "useNotification", "formatMessage", "useIntl", "queryClient", "useQueryClient", "enabled", "previousJobStatus", "setPreviousJobStatus", "useState", "job", "refetch", "useQuery", "refetchInterval", "status", "retry", "refetchOnWindowFocus", "currentJobStatus", "React", "useEffect", "type", "message", "id", "getTrad", "defaultMessage", "invalidateQueries", "init", "initialState", "initialData", "responsiveDimensions", "sizeOptimization", "autoOrientation", "videoPreview", "aiMetadata", "initialState", "modifiedData", "reducer", "state", "action", "produce", "drafState", "type", "data", "set", "keys", "split", "value", "BetaStatus", "props", "formatMessage", "useIntl", "_jsx", "Status", "size", "variant", "style", "textTransform", "display", "Typography", "tag", "fontWeight", "id", "defaultMessage", "MetadataAction", "job", "imagesWithoutMetadataCount", "isConfirmDialogOpen", "onConfirmDialogChange", "onGenerate", "status", "Flex", "gap", "alignItems", "textColor", "getTrad", "_jsxs", "Check", "width", "height", "Dialog", "Root", "open", "onOpenChange", "Trigger", "TextButton", "disabled", "ConfirmDialog", "onConfirm", "title", "count", "SettingsPage", "toggleNotification", "useNotification", "put", "post", "get", "useFetchClient", "setIsConfirmDialogOpen", "useState", "trackUsage", "useTracking", "initialData", "modifiedData", "dispatch", "useReducer", "reducer", "initialState", "init", "data", "isLoading", "refetch", "useSettings", "isAIAvailable", "useAIAvailability", "imageCountResponse", "isLoadingImagesWithoutMetadataCount", "useQuery", "enabled", "aiMetadata", "retry", "React", "useEffect", "type", "isSaveButtonDisabled", "isEqual", "mutateAsync", "isSubmitting", "useMutation", "body", "onSuccess", "message", "onError", "err", "aiMetadataJob", "refetchAiMetadataJob", "useAIMetadataJob", "startGenerateAIMetadata", "handleSubmit", "e", "preventDefault", "handleChange", "target", "name", "value", "keys", "Page", "Loading", "Main", "tabIndex", "Title", "form", "onSubmit", "Layouts", "Header", "primaryAction", "Button", "loading", "startIcon", "fullWidth", "subtitle", "Content", "direction", "Box", "background", "padding", "shadow", "hasRadius", "Grid", "Item", "col", "xs", "color", "Sparkle", "paddingTop", "justifyContent", "Field", "minWidth", "Toggle", "checked", "offLabel", "onLabel", "onChange", "Boolean", "totalImages", "_Fragment", "Divider", "marginTop", "marginBottom", "hint", "Label", "responsiveDimensions", "Hint", "sizeOptimization", "autoOrientation", "ProtectedSettingsPage", "Protect", "permissions", "PERMISSIONS", "settings"]
}
