import {
  pluginId
} from "./chunk-URXKF3BA.js";
import {
  useQuery
} from "./chunk-UQ7YKN5C.js";
import {
  useAIAvailability
} from "./chunk-ZE7NAT3H.js";
import {
  useFetchClient
} from "./chunk-ORAR3IKK.js";
import {
  errorsTrads
} from "./chunk-IFOFBKTA.js";
import {
  create4 as create,
  create6 as create2
} from "./chunk-4H2ZWALN.js";
import {
  useTracking
} from "./chunk-W2Y3XAHI.js";
import {
  require_lib
} from "./chunk-HQG3ICNW.js";
import {
  __toESM
} from "./chunk-LK32TJAX.js";

// node_modules/@strapi/upload/dist/admin/utils/getTrad.mjs
var getTrad = (id) => `${pluginId}.${id}`;

// node_modules/@strapi/upload/dist/admin/enums.mjs
var DocType = function(DocType2) {
  DocType2["Pdf"] = "pdf";
  DocType2["Csv"] = "csv";
  DocType2["Xls"] = "xls";
  DocType2["Zip"] = "zip";
  return DocType2;
}({});
var AssetType = function(AssetType2) {
  AssetType2["Video"] = "video";
  AssetType2["Image"] = "image";
  AssetType2["Document"] = "doc";
  AssetType2["Audio"] = "audio";
  return AssetType2;
}({});

// node_modules/@strapi/upload/dist/admin/utils/typeFromMime.mjs
var MIME_TYPE_MAP = {
  image: AssetType.Image,
  video: AssetType.Video,
  audio: AssetType.Audio,
  pdf: DocType.Pdf,
  csv: DocType.Csv,
  // For XLS files the mime is application/vnd.ms-excel so we need to check for 'excel' not 'xls'
  excel: DocType.Xls,
  zip: DocType.Zip
};
var MIME_TYPE_KEYS = Object.keys(MIME_TYPE_MAP);
var typeFromMime = (mime) => {
  const mimeTypeKey = MIME_TYPE_KEYS.find((m) => mime.toLowerCase().includes(m));
  if (mimeTypeKey === void 0) return AssetType.Document;
  return MIME_TYPE_MAP[mimeTypeKey] ?? AssetType.Document;
};

// node_modules/@strapi/upload/dist/admin/utils/urlYupSchema.mjs
var urlSchema = create2().shape({
  urls: create().test({
    name: "isUrlValid",
    // eslint-disable-next-line no-template-curly-in-string
    message: "${path}",
    test(values = "") {
      const urls = values.split(/\r?\n/);
      if (urls.length === 0) {
        return this.createError({
          path: this.path,
          message: errorsTrads.min.id
        });
      }
      if (urls.length > 20) {
        return this.createError({
          path: this.path,
          message: errorsTrads.max.id
        });
      }
      const filtered = urls.filter((val) => {
        try {
          new URL(val);
          return false;
        } catch (err) {
          return true;
        }
      });
      const filteredLength = filtered.length;
      if (filteredLength === 0) {
        return true;
      }
      const errorMessage = filteredLength > 1 ? "form.upload-url.error.url.invalids" : "form.upload-url.error.url.invalid";
      return this.createError({
        path: this.path,
        message: getTrad(errorMessage),
        params: {
          number: filtered.length
        }
      });
    }
  })
});

// node_modules/@strapi/upload/dist/admin/constants.mjs
var import_qs = __toESM(require_lib(), 1);
var AssetSource = function(AssetSource2) {
  AssetSource2["Url"] = "url";
  AssetSource2["Computer"] = "computer";
  return AssetSource2;
}({});
var PERMISSIONS = {
  // This permission regards the main component (App) and is used to tell
  // If the plugin link should be displayed in the menu
  // And also if the plugin is accessible. This use case is found when a user types the url of the
  // plugin directly in the browser
  main: [
    {
      action: "plugin::upload.read",
      subject: null
    },
    {
      action: "plugin::upload.assets.create",
      subject: null
    },
    {
      action: "plugin::upload.assets.update",
      subject: null
    }
  ],
  copyLink: [
    {
      action: "plugin::upload.assets.copy-link",
      subject: null
    }
  ],
  create: [
    {
      action: "plugin::upload.assets.create",
      subject: null
    }
  ],
  download: [
    {
      action: "plugin::upload.assets.download",
      subject: null
    }
  ],
  read: [
    {
      action: "plugin::upload.read",
      subject: null
    }
  ],
  configureView: [
    {
      action: "plugin::upload.configure-view",
      subject: null
    }
  ],
  settings: [
    {
      action: "plugin::upload.settings.read",
      subject: null
    }
  ],
  update: [
    {
      action: "plugin::upload.assets.update",
      subject: null,
      fields: null
    }
  ]
};
var tableHeaders = [
  {
    name: "preview",
    key: "preview",
    metadatas: {
      label: {
        id: getTrad("list.table.header.preview"),
        defaultMessage: "preview"
      },
      isSortable: false
    },
    type: "image"
  },
  {
    name: "name",
    key: "name",
    metadatas: {
      label: {
        id: getTrad("list.table.header.name"),
        defaultMessage: "name"
      },
      isSortable: true
    },
    type: "text"
  },
  {
    name: "ext",
    key: "extension",
    metadatas: {
      label: {
        id: getTrad("list.table.header.ext"),
        defaultMessage: "extension"
      },
      isSortable: false
    },
    type: "ext"
  },
  {
    name: "size",
    key: "size",
    metadatas: {
      label: {
        id: getTrad("list.table.header.size"),
        defaultMessage: "size"
      },
      isSortable: false
    },
    type: "size"
  },
  {
    name: "createdAt",
    key: "createdAt",
    metadatas: {
      label: {
        id: getTrad("list.table.header.createdAt"),
        defaultMessage: "created"
      },
      isSortable: true
    },
    type: "date"
  },
  {
    name: "updatedAt",
    key: "updatedAt",
    metadatas: {
      label: {
        id: getTrad("list.table.header.updatedAt"),
        defaultMessage: "last update"
      },
      isSortable: true
    },
    type: "date"
  }
];
var sortOptions = [
  {
    key: "sort.created_at_desc",
    value: "createdAt:DESC"
  },
  {
    key: "sort.created_at_asc",
    value: "createdAt:ASC"
  },
  {
    key: "sort.name_asc",
    value: "name:ASC"
  },
  {
    key: "sort.name_desc",
    value: "name:DESC"
  },
  {
    key: "sort.updated_at_desc",
    value: "updatedAt:DESC"
  },
  {
    key: "sort.updated_at_asc",
    value: "updatedAt:ASC"
  }
];
var pageSizes = [
  10,
  20,
  50,
  100
];
var localStorageKeys = {
  modalView: `STRAPI_UPLOAD_MODAL_VIEW`,
  view: `STRAPI_UPLOAD_LIBRARY_VIEW`
};
var viewOptions = {
  GRID: 0,
  LIST: 1
};

// node_modules/@strapi/upload/dist/admin/hooks/useSettings.mjs
function useSettings(isEnabled = true) {
  const { get } = useFetchClient();
  return useQuery({
    queryKey: [
      "upload",
      "settings"
    ],
    enabled: isEnabled,
    async queryFn() {
      const { data: { data } } = await get("/upload/settings");
      return data;
    }
  });
}

// node_modules/@strapi/upload/dist/admin/hooks/useTracking.mjs
var useTracking2 = () => {
  const { trackUsage: trackStrapiUsage } = useTracking();
  const { data } = useSettings();
  const isAiAvailable = useAIAvailability();
  const trackUsage = (event, properties) => {
    return trackStrapiUsage(event, {
      ...properties,
      ...isAiAvailable ? {
        isAIMediaLibraryConfigured: Boolean(data == null ? void 0 : data.aiMetadata)
      } : {}
    });
  };
  return {
    trackUsage
  };
};

export {
  getTrad,
  DocType,
  AssetType,
  typeFromMime,
  urlSchema,
  AssetSource,
  PERMISSIONS,
  tableHeaders,
  sortOptions,
  pageSizes,
  localStorageKeys,
  viewOptions,
  useSettings,
  useTracking2 as useTracking
};
//# sourceMappingURL=chunk-4ENEEE2Y.js.map
