{"version":3,"file":"ListViewPage.mjs","sources":["../../../../admin/src/pages/ListView/ListViewPage.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {\n  Page,\n  Pagination,\n  SearchInput,\n  Table,\n  BackButton,\n  useNotification,\n  useStrapiApp,\n  useTracking,\n  useAPIErrorHandler,\n  useQueryParams,\n  useScopedPersistentState,\n  useRBAC,\n  Layouts,\n  useTable,\n  tours,\n} from '@strapi/admin/strapi-admin';\nimport {\n  Button,\n  Flex,\n  Typography,\n  ButtonProps,\n  Box,\n  EmptyStateLayout,\n} from '@strapi/design-system';\nimport { Plus } from '@strapi/icons';\nimport { EmptyDocuments } from '@strapi/icons/symbols';\nimport isEqual from 'lodash/isEqual';\nimport { stringify } from 'qs';\nimport { useIntl } from 'react-intl';\nimport { useNavigate, Link as ReactRouterLink, useParams } from 'react-router-dom';\nimport { styled } from 'styled-components';\n\nimport { InjectionZone } from '../../components/InjectionZone';\nimport { HOOKS } from '../../constants/hooks';\nimport { PERMISSIONS } from '../../constants/plugin';\nimport { DocumentRBAC, useDocumentRBAC } from '../../features/DocumentRBAC';\nimport { useDoc } from '../../hooks/useDocument';\nimport {\n  ListFieldLayout,\n  convertListLayoutToFieldLayouts,\n  useDocumentLayout,\n} from '../../hooks/useDocumentLayout';\nimport { usePersistentPartialQueryParams } from '../../hooks/usePersistentQueryParams';\nimport { usePrev } from '../../hooks/usePrev';\nimport { useGetAllDocumentsQuery } from '../../services/documents';\nimport { buildValidParams } from '../../utils/api';\nimport { getTranslation } from '../../utils/translations';\nimport { getDisplayName } from '../../utils/users';\nimport { DocumentStatus } from '../EditView/components/DocumentStatus';\n\nimport { BulkActionsRenderer } from './components/BulkActions/Actions';\nimport { Filters } from './components/Filters';\nimport { TableActions } from './components/TableActions';\nimport { CellContent } from './components/TableCells/CellContent';\nimport { ViewSettingsMenu } from './components/ViewSettingsMenu';\n\nimport type { Modules } from '@strapi/types';\n\nconst { INJECT_COLUMN_IN_TABLE } = HOOKS;\n\n/* -------------------------------------------------------------------------------------------------\n * ListViewPage\n * -----------------------------------------------------------------------------------------------*/\nconst LayoutsHeaderCustom = styled(Layouts.Header)`\n  overflow-wrap: anywhere;\n`;\n\nconst ListViewPage = () => {\n  const { trackUsage } = useTracking();\n  const navigate = useNavigate();\n  const { formatMessage } = useIntl();\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler(getTranslation);\n\n  usePersistentPartialQueryParams('STRAPI_LIST_VIEW_SETTINGS:', ['sort', 'filters', 'pageSize']);\n  usePersistentPartialQueryParams('STRAPI_LOCALE', ['plugins.i18n.locale'], false);\n\n  const { collectionType, model, schema } = useDoc();\n  const { list } = useDocumentLayout(model);\n\n  const [displayedHeaderNames, setDisplayedHeaderNames] = useScopedPersistentState<string[] | null>(\n    `STRAPI_LIST_VIEW_DISPLAYED_HEADERS:${model}`,\n    null\n  );\n\n  const mapDisplayedHeaders = (headers: ListFieldLayout[]) => headers.map((header) => header.name);\n\n  const displayedHeaders: ListFieldLayout[] = React.useMemo(() => {\n    if (\n      !displayedHeaderNames ||\n      !list.metadatas ||\n      Object.keys(list.metadatas).length <= 0 ||\n      !schema?.attributes\n    )\n      return [];\n\n    return convertListLayoutToFieldLayouts(displayedHeaderNames, schema.attributes, list.metadatas);\n  }, [displayedHeaderNames, schema, list]);\n\n  const handleSetHeaders = (headers: string[]) => {\n    setDisplayedHeaderNames(headers);\n  };\n\n  const handleResetHeaders = () => {\n    setDisplayedHeaderNames(mapDisplayedHeaders(list.layout));\n  };\n\n  /**\n   * If the persistent displayedHeaders are not yet initialized, set them to list.layout\n   */\n  React.useEffect(() => {\n    // wait for list.layout to be loaded\n    if (list.layout.length === 0) {\n      return;\n    }\n\n    if (!displayedHeaderNames) {\n      handleResetHeaders();\n    }\n  }, [list.layout]);\n\n  React.useEffect(() => {\n    if (!schema?.attributes) return;\n    if (!displayedHeaderNames || displayedHeaderNames.length === 0) return;\n    if (schema.uid !== model) return;\n\n    const allowedDisplayHeaders = displayedHeaderNames.filter((header) =>\n      Object.keys(schema?.attributes).includes(header)\n    );\n\n    if (allowedDisplayHeaders.length !== displayedHeaderNames.length) {\n      handleSetHeaders(allowedDisplayHeaders);\n    }\n  }, [displayedHeaderNames]);\n\n  const [{ query }] = useQueryParams<{\n    plugins?: Record<string, unknown>;\n    page?: string;\n    pageSize?: string;\n    sort?: string;\n  }>({\n    page: '1',\n    pageSize: list.settings.pageSize.toString(),\n    sort: list.settings.defaultSortBy\n      ? `${list.settings.defaultSortBy}:${list.settings.defaultSortOrder}`\n      : '',\n  });\n\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n\n  const { data, error, isLoading, isFetching } = useGetAllDocumentsQuery({\n    model,\n    params,\n  });\n\n  /**\n   * If the API returns an error, display a notification\n   */\n  React.useEffect(() => {\n    if (error) {\n      toggleNotification({\n        type: 'danger',\n        message: formatAPIError(error),\n      });\n    }\n  }, [error, formatAPIError, toggleNotification]);\n\n  const { results = [], pagination } = data ?? {};\n\n  React.useEffect(() => {\n    if (pagination && pagination.pageCount > 0 && pagination.page > pagination.pageCount) {\n      navigate(\n        {\n          search: stringify({\n            ...query,\n            page: pagination.pageCount,\n          }),\n        },\n        { replace: true }\n      );\n    }\n  }, [pagination, formatMessage, query, navigate]);\n\n  const { canCreate } = useDocumentRBAC('ListViewPage', ({ canCreate }) => ({\n    canCreate,\n  }));\n\n  const runHookWaterfall = useStrapiApp('ListViewPage', ({ runHookWaterfall }) => runHookWaterfall);\n  /**\n   * Run the waterfall and then inject our additional table headers.\n   */\n  const tableHeaders = React.useMemo(() => {\n    const headers = runHookWaterfall(INJECT_COLUMN_IN_TABLE, {\n      displayedHeaders,\n      layout: list,\n    });\n\n    const formattedHeaders = headers.displayedHeaders.map<ListFieldLayout>((header) => {\n      /**\n       * When the header label is a string, it is an attribute on the current content-type:\n       * Use the attribute name value to compute the translation.\n       * Otherwise, it should be a  translation object coming from a plugin that injects into the table (ie i18n, content-releases, review-workflows):\n       * Use the translation object as is.\n       */\n      const translation =\n        typeof header.label === 'string'\n          ? {\n              id: `content-manager.content-types.${model}.${header.name}`,\n              defaultMessage: header.label,\n            }\n          : header.label;\n\n      return {\n        ...header,\n        label: formatMessage(translation),\n        name: `${header.name}${header.mainField?.name ? `.${header.mainField.name}` : ''}`,\n      };\n    });\n\n    if (schema?.options?.draftAndPublish) {\n      formattedHeaders.push({\n        attribute: {\n          type: 'custom',\n        },\n        name: 'status',\n        label: formatMessage({\n          id: getTranslation(`containers.list.table-headers.status`),\n          defaultMessage: 'status',\n        }),\n        searchable: false,\n        sortable: false,\n      } satisfies ListFieldLayout);\n    }\n\n    return formattedHeaders;\n  }, [\n    displayedHeaders,\n    formatMessage,\n    list,\n    runHookWaterfall,\n    schema?.options?.draftAndPublish,\n    model,\n  ]);\n\n  if (isLoading) {\n    return <Page.Loading />;\n  }\n\n  if (error) {\n    return <Page.Error />;\n  }\n\n  const contentTypeTitle = schema?.info.displayName\n    ? formatMessage({ id: schema.info.displayName, defaultMessage: schema.info.displayName })\n    : formatMessage({\n        id: 'content-manager.containers.untitled',\n        defaultMessage: 'Untitled',\n      });\n\n  const handleRowClick = (id: Modules.Documents.ID) => () => {\n    trackUsage('willEditEntryFromList');\n    navigate({\n      pathname: id.toString(),\n      search: stringify({ plugins: query.plugins }),\n    });\n  };\n\n  if (!isFetching && results.length === 0) {\n    return (\n      <>\n        <tours.contentManager.Introduction>\n          {/* Invisible Anchor */}\n          <Box />\n        </tours.contentManager.Introduction>\n        <Page.Main>\n          <Page.Title>{`${contentTypeTitle}`}</Page.Title>\n          <LayoutsHeaderCustom\n            primaryAction={\n              canCreate ? (\n                <tours.contentManager.CreateNewEntry>\n                  <CreateButton />\n                </tours.contentManager.CreateNewEntry>\n              ) : null\n            }\n            subtitle={formatMessage(\n              {\n                id: getTranslation('pages.ListView.header-subtitle'),\n                defaultMessage:\n                  '{number, plural, =0 {# entries} one {# entry} other {# entries}} found',\n              },\n              { number: pagination?.total }\n            )}\n            title={contentTypeTitle}\n            navigationAction={<BackButton />}\n          />\n          <Layouts.Action\n            endActions={\n              <>\n                <InjectionZone area=\"listView.actions\" />\n                <ViewSettingsMenu\n                  setHeaders={handleSetHeaders}\n                  resetHeaders={handleResetHeaders}\n                  headers={displayedHeaderNames ?? []}\n                />\n              </>\n            }\n            startActions={\n              <>\n                {list.settings.searchable && (\n                  <SearchInput\n                    label={formatMessage(\n                      { id: 'app.component.search.label', defaultMessage: 'Search for {target}' },\n                      { target: contentTypeTitle }\n                    )}\n                    placeholder={formatMessage({\n                      id: 'global.search',\n                      defaultMessage: 'Search',\n                    })}\n                    trackedEvent=\"didSearch\"\n                  />\n                )}\n                {list.settings.filterable && schema ? <Filters schema={schema} /> : null}\n              </>\n            }\n          />\n          <Layouts.Content>\n            <Box background=\"neutral0\" shadow=\"filterShadow\" hasRadius>\n              <EmptyStateLayout\n                action={\n                  canCreate && (\n                    <Box>\n                      <CreateButton variant=\"secondary\" />\n                    </Box>\n                  )\n                }\n                content={formatMessage({\n                  id: 'app.components.EmptyStateLayout.content-document',\n                  defaultMessage: 'No content found',\n                })}\n                hasRadius\n                icon={<EmptyDocuments width=\"16rem\" />}\n              />\n            </Box>\n          </Layouts.Content>\n        </Page.Main>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <tours.contentManager.Introduction>\n        {/* Invisible Anchor */}\n        <Box />\n      </tours.contentManager.Introduction>\n      <Page.Main>\n        <Page.Title>{`${contentTypeTitle}`}</Page.Title>\n        <LayoutsHeaderCustom\n          primaryAction={\n            canCreate ? (\n              <tours.contentManager.CreateNewEntry>\n                <CreateButton />\n              </tours.contentManager.CreateNewEntry>\n            ) : null\n          }\n          subtitle={formatMessage(\n            {\n              id: getTranslation('pages.ListView.header-subtitle'),\n              defaultMessage:\n                '{number, plural, =0 {# entries} one {# entry} other {# entries}} found',\n            },\n            { number: pagination?.total }\n          )}\n          title={contentTypeTitle}\n          navigationAction={<BackButton />}\n        />\n        <Layouts.Action\n          endActions={\n            <>\n              <InjectionZone area=\"listView.actions\" />\n              <ViewSettingsMenu\n                setHeaders={handleSetHeaders}\n                resetHeaders={handleResetHeaders}\n                headers={displayedHeaderNames ?? []}\n              />\n            </>\n          }\n          startActions={\n            <>\n              {list.settings.searchable && (\n                <SearchInput\n                  disabled={results.length === 0}\n                  label={formatMessage(\n                    { id: 'app.component.search.label', defaultMessage: 'Search for {target}' },\n                    { target: contentTypeTitle }\n                  )}\n                  placeholder={formatMessage({\n                    id: 'global.search',\n                    defaultMessage: 'Search',\n                  })}\n                  trackedEvent=\"didSearch\"\n                />\n              )}\n              {list.settings.filterable && schema ? (\n                <Filters disabled={results.length === 0} schema={schema} />\n              ) : null}\n            </>\n          }\n        />\n        <Layouts.Content>\n          <Flex gap={4} direction=\"column\" alignItems=\"stretch\">\n            <Table.Root rows={results} headers={tableHeaders} isLoading={isFetching}>\n              <TableActionsBar />\n              <Table.Content>\n                <Table.Head>\n                  <Table.HeaderCheckboxCell />\n                  {tableHeaders.map((header: ListFieldLayout) => (\n                    <Table.HeaderCell key={header.name} {...header} />\n                  ))}\n                </Table.Head>\n                <Table.Loading />\n                <Table.Empty action={canCreate ? <CreateButton variant=\"secondary\" /> : null} />\n                <Table.Body>\n                  {results.map((row) => {\n                    return (\n                      <Table.Row\n                        cursor=\"pointer\"\n                        key={row.id}\n                        onClick={handleRowClick(row.documentId)}\n                      >\n                        <Table.CheckboxCell id={row.id} />\n                        {tableHeaders.map(({ cellFormatter, ...header }) => {\n                          if (header.name === 'status') {\n                            const { status } = row;\n\n                            return (\n                              <Table.Cell key={header.name}>\n                                <DocumentStatus status={status} maxWidth={'min-content'} />\n                              </Table.Cell>\n                            );\n                          }\n                          if (['createdBy', 'updatedBy'].includes(header.name.split('.')[0])) {\n                            // Display the users full name\n                            // Some entries doesn't have a user assigned as creator/updater (ex: entries created through content API)\n                            // In this case, we display a dash\n                            return (\n                              <Table.Cell key={header.name}>\n                                <Typography textColor=\"neutral800\">\n                                  {row[header.name.split('.')[0]]\n                                    ? getDisplayName(row[header.name.split('.')[0]])\n                                    : '-'}\n                                </Typography>\n                              </Table.Cell>\n                            );\n                          }\n                          if (typeof cellFormatter === 'function') {\n                            return (\n                              <Table.Cell key={header.name}>\n                                {/* @ts-expect-error â€“ TODO: fix this TS error */}\n                                {cellFormatter(row, header, { collectionType, model })}\n                              </Table.Cell>\n                            );\n                          }\n                          return (\n                            <Table.Cell key={header.name}>\n                              <CellContent\n                                content={row[header.name.split('.')[0]]}\n                                rowId={row.documentId}\n                                {...header}\n                              />\n                            </Table.Cell>\n                          );\n                        })}\n                        {/* we stop propagation here to allow the menu to trigger it's events without triggering the row redirect */}\n                        <ActionsCell onClick={(e) => e.stopPropagation()}>\n                          <TableActions document={row} />\n                        </ActionsCell>\n                      </Table.Row>\n                    );\n                  })}\n                </Table.Body>\n              </Table.Content>\n            </Table.Root>\n            <Pagination.Root\n              {...pagination}\n              onPageSizeChange={() => trackUsage('willChangeNumberOfEntriesPerPage')}\n            >\n              <Pagination.PageSize />\n              <Pagination.Links />\n            </Pagination.Root>\n          </Flex>\n        </Layouts.Content>\n      </Page.Main>\n    </>\n  );\n};\n\nconst ActionsCell = styled(Table.Cell)`\n  display: flex;\n  justify-content: flex-end;\n`;\n\n/* -------------------------------------------------------------------------------------------------\n * TableActionsBar\n * -----------------------------------------------------------------------------------------------*/\n\nconst TableActionsBar = () => {\n  const selectRow = useTable('TableActionsBar', (state) => state.selectRow);\n  const [{ query }] = useQueryParams<{ plugins: { i18n: { locale: string } } }>();\n  const locale = query?.plugins?.i18n?.locale;\n  const prevLocale = usePrev(locale);\n\n  // TODO: find a better way to reset the selected rows when the locale changes across all the app\n  React.useEffect(() => {\n    if (prevLocale !== locale) {\n      selectRow([]);\n    }\n  }, [selectRow, prevLocale, locale]);\n\n  return (\n    <Table.ActionBar>\n      <BulkActionsRenderer />\n    </Table.ActionBar>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * CreateButton\n * -----------------------------------------------------------------------------------------------*/\n\ninterface CreateButtonProps extends Pick<ButtonProps, 'variant'> {}\n\nconst CreateButton = ({ variant }: CreateButtonProps) => {\n  const { formatMessage } = useIntl();\n  const { trackUsage } = useTracking();\n  const [{ query }] = useQueryParams<{ plugins: object }>();\n\n  return (\n    <Button\n      variant={variant}\n      tag={ReactRouterLink}\n      onClick={() => {\n        trackUsage('willCreateEntry', { status: 'draft' });\n      }}\n      startIcon={<Plus />}\n      style={{ textDecoration: 'none' }}\n      to={{\n        pathname: 'create',\n        search: stringify({ plugins: query.plugins }),\n      }}\n      minWidth=\"max-content\"\n      fullWidth\n    >\n      {formatMessage({\n        id: getTranslation('HeaderLayout.button.label-add-entry'),\n        defaultMessage: 'Create new entry',\n      })}\n    </Button>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * ProtectedListViewPage\n * -----------------------------------------------------------------------------------------------*/\n\nconst ProtectedListViewPage = () => {\n  const { slug = '' } = useParams<{\n    slug: string;\n  }>();\n  const {\n    permissions = [],\n    isLoading,\n    error,\n  } = useRBAC(\n    PERMISSIONS.map((action) => ({\n      action,\n      subject: slug,\n    }))\n  );\n\n  if (isLoading) {\n    return <Page.Loading />;\n  }\n\n  if (error || !slug) {\n    return <Page.Error />;\n  }\n\n  return (\n    <Page.Protect permissions={permissions}>\n      {({ permissions }) => (\n        <DocumentRBAC permissions={permissions}>\n          <ListViewPage key={slug} />\n        </DocumentRBAC>\n      )}\n    </Page.Protect>\n  );\n};\n\nexport { ListViewPage, ProtectedListViewPage };\n"],"names":["INJECT_COLUMN_IN_TABLE","HOOKS","LayoutsHeaderCustom","styled","Layouts","Header","ListViewPage","trackUsage","useTracking","navigate","useNavigate","formatMessage","useIntl","toggleNotification","useNotification","_unstableFormatAPIError","formatAPIError","useAPIErrorHandler","getTranslation","usePersistentPartialQueryParams","collectionType","model","schema","useDoc","list","useDocumentLayout","displayedHeaderNames","setDisplayedHeaderNames","useScopedPersistentState","mapDisplayedHeaders","headers","map","header","name","displayedHeaders","React","useMemo","metadatas","Object","keys","length","attributes","convertListLayoutToFieldLayouts","handleSetHeaders","handleResetHeaders","layout","useEffect","uid","allowedDisplayHeaders","filter","includes","query","useQueryParams","page","pageSize","settings","toString","sort","defaultSortBy","defaultSortOrder","params","buildValidParams","data","error","isLoading","isFetching","useGetAllDocumentsQuery","type","message","results","pagination","pageCount","search","stringify","replace","canCreate","useDocumentRBAC","runHookWaterfall","useStrapiApp","tableHeaders","formattedHeaders","translation","label","id","defaultMessage","mainField","options","draftAndPublish","push","attribute","searchable","sortable","_jsx","Page","Loading","Error","contentTypeTitle","info","displayName","handleRowClick","pathname","plugins","_jsxs","_Fragment","tours","contentManager","Introduction","Box","Main","Title","primaryAction","CreateNewEntry","CreateButton","subtitle","number","total","title","navigationAction","BackButton","Action","endActions","InjectionZone","area","ViewSettingsMenu","setHeaders","resetHeaders","startActions","SearchInput","target","placeholder","trackedEvent","filterable","Filters","Content","background","shadow","hasRadius","EmptyStateLayout","action","variant","content","icon","EmptyDocuments","width","disabled","Flex","gap","direction","alignItems","Table","Root","rows","TableActionsBar","Head","HeaderCheckboxCell","HeaderCell","Empty","Body","row","Row","cursor","onClick","documentId","CheckboxCell","cellFormatter","status","Cell","DocumentStatus","maxWidth","split","Typography","textColor","getDisplayName","CellContent","rowId","ActionsCell","e","stopPropagation","TableActions","document","Pagination","onPageSizeChange","PageSize","Links","selectRow","useTable","state","locale","i18n","prevLocale","usePrev","ActionBar","BulkActionsRenderer","Button","tag","ReactRouterLink","startIcon","Plus","style","textDecoration","to","minWidth","fullWidth","ProtectedListViewPage","slug","useParams","permissions","useRBAC","PERMISSIONS","subject","Protect","DocumentRBAC"],"mappings":"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"}