{"version":3,"file":"HeaderLayout.mjs","sources":["../../../../../../admin/src/components/Layouts/HeaderLayout.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { Box, Flex, Typography, TypographyProps, useCallbackRef } from '@strapi/design-system';\n\nimport {\n  HEIGHT_TOP_NAVIGATION,\n  HEIGHT_TOP_NAVIGATION_MEDIUM,\n  RESPONSIVE_DEFAULT_SPACING,\n} from '../../constants/theme';\nimport { useDeviceType } from '../../hooks/useDeviceType';\nimport { useElementOnScreen } from '../../hooks/useElementOnScreen';\nimport { useIsMobile } from '../../hooks/useMediaQuery';\n\n/* -------------------------------------------------------------------------------------------------\n * BaseHeaderLayout\n * -----------------------------------------------------------------------------------------------*/\n\ninterface BaseHeaderLayoutProps extends Omit<TypographyProps<'div'>, 'tag'> {\n  navigationAction?: React.ReactNode;\n  primaryAction?: React.ReactNode;\n  secondaryAction?: React.ReactNode;\n  subtitle?: React.ReactNode;\n  sticky?: boolean;\n  width?: number;\n}\n\nconst BaseHeaderLayout = React.forwardRef<HTMLDivElement, BaseHeaderLayoutProps>(\n  (\n    { navigationAction, primaryAction, secondaryAction, subtitle, title, sticky, width, ...props },\n    ref\n  ) => {\n    const isMobile = useIsMobile();\n    const isSubtitleString = typeof subtitle === 'string';\n\n    if (sticky) {\n      return (\n        <Box\n          display=\"flex\"\n          paddingLeft={6}\n          paddingRight={6}\n          paddingTop={2}\n          paddingBottom={2}\n          position=\"fixed\"\n          top={0}\n          background=\"neutral0\"\n          shadow=\"tableShadow\"\n          width={`${width}px`}\n          zIndex={2}\n          minHeight={{\n            initial: HEIGHT_TOP_NAVIGATION,\n            medium: HEIGHT_TOP_NAVIGATION_MEDIUM,\n          }}\n          data-strapi-header-sticky\n        >\n          <Flex alignItems=\"center\" justifyContent=\"space-between\" wrap=\"wrap\" width=\"100%\">\n            <Flex>\n              {navigationAction && <Box paddingRight={3}>{navigationAction}</Box>}\n              <Box>\n                <Typography variant=\"beta\" tag=\"h1\" {...props}>\n                  {title}\n                </Typography>\n                {isSubtitleString ? (\n                  <Typography variant=\"pi\" textColor=\"neutral600\">\n                    {subtitle}\n                  </Typography>\n                ) : (\n                  subtitle\n                )}\n              </Box>\n              {secondaryAction ? <Box paddingLeft={4}>{secondaryAction}</Box> : null}\n            </Flex>\n            <Flex>{primaryAction ? <Box paddingLeft={2}>{primaryAction}</Box> : undefined}</Flex>\n          </Flex>\n        </Box>\n      );\n    }\n\n    return (\n      <Box\n        ref={ref}\n        paddingLeft={RESPONSIVE_DEFAULT_SPACING}\n        paddingRight={RESPONSIVE_DEFAULT_SPACING}\n        paddingBottom={{\n          initial: 4,\n          large: 8,\n        }}\n        paddingTop={{\n          initial: 4,\n          large: navigationAction ? 6 : 8,\n        }}\n        background=\"neutral100\"\n        data-strapi-header\n      >\n        <Flex direction=\"column\" alignItems=\"initial\" gap={3}>\n          {navigationAction}\n          {!isMobile ? (\n            <>\n              <Flex justifyContent=\"space-between\" wrap=\"wrap\" gap={4}>\n                <Flex minWidth={0}>\n                  <Typography\n                    tag=\"h1\"\n                    variant=\"alpha\"\n                    {...props}\n                    style={{\n                      wordBreak: 'break-word',\n                      overflowWrap: 'break-word',\n                      maxWidth: '100%',\n                    }}\n                  >\n                    {title}\n                  </Typography>\n                  {secondaryAction && <Box paddingLeft={4}>{secondaryAction}</Box>}\n                </Flex>\n                <Box paddingLeft={4} marginLeft=\"auto\">\n                  {primaryAction}\n                </Box>\n              </Flex>\n              {isSubtitleString ? (\n                <Typography variant=\"epsilon\" textColor=\"neutral600\" tag=\"p\">\n                  {subtitle}\n                </Typography>\n              ) : (\n                subtitle\n              )}\n            </>\n          ) : (\n            <>\n              <Typography\n                tag=\"h1\"\n                variant=\"alpha\"\n                {...props}\n                style={{\n                  wordBreak: 'break-word',\n                  overflowWrap: 'break-word',\n                  maxWidth: '100%',\n                }}\n              >\n                {title}\n              </Typography>\n              {isSubtitleString ? (\n                <Typography variant=\"epsilon\" textColor=\"neutral600\" tag=\"p\">\n                  {subtitle}\n                </Typography>\n              ) : (\n                subtitle\n              )}\n              {(primaryAction || secondaryAction) && (\n                <Flex gap={3}>\n                  {secondaryAction}\n                  {primaryAction}\n                </Flex>\n              )}\n            </>\n          )}\n        </Flex>\n      </Box>\n    );\n  }\n);\n\n/* -------------------------------------------------------------------------------------------------\n * HeaderLayout\n * -----------------------------------------------------------------------------------------------*/\n\ninterface HeaderLayoutProps extends BaseHeaderLayoutProps {}\n\nconst HeaderLayout = (props: HeaderLayoutProps) => {\n  const baseHeaderLayoutRef = React.useRef<HTMLDivElement>(null);\n  const [headerSize, setHeaderSize] = React.useState<DOMRect | null>(null);\n  const [isVisible, setIsVisible] = React.useState(true);\n  const deviceType = useDeviceType();\n\n  const containerRef = useElementOnScreen<HTMLDivElement>(setIsVisible, {\n    root: null,\n    rootMargin: '0px',\n    threshold: 0,\n  });\n\n  useResizeObserver([containerRef, baseHeaderLayoutRef], () => {\n    const headerContainer = baseHeaderLayoutRef.current ?? containerRef.current;\n\n    if (headerContainer) {\n      const newSize = headerContainer.getBoundingClientRect();\n\n      setHeaderSize((prevSize) => {\n        // Only update if size actually changed\n        if (!prevSize || prevSize.height !== newSize.height || prevSize.width !== newSize.width) {\n          return newSize;\n        }\n        return prevSize;\n      });\n    }\n  });\n\n  React.useEffect(() => {\n    if (baseHeaderLayoutRef.current || containerRef.current) {\n      const headerContainer = baseHeaderLayoutRef.current ?? containerRef.current;\n      setHeaderSize(headerContainer?.getBoundingClientRect() ?? null);\n    }\n  }, [containerRef]);\n\n  if (deviceType === 'mobile') {\n    return <BaseHeaderLayout {...props} />;\n  }\n\n  return (\n    <div ref={containerRef}>\n      <div style={{ height: headerSize?.height }}>\n        {isVisible && <BaseHeaderLayout ref={baseHeaderLayoutRef} {...props} />}\n      </div>\n\n      {!isVisible && <BaseHeaderLayout {...props} sticky width={headerSize?.width} />}\n    </div>\n  );\n};\n\nHeaderLayout.displayName = 'HeaderLayout';\n\n/**\n * useResizeObserver: hook that observes the size of an element and calls a callback when it changes.\n */\nconst useResizeObserver = (\n  sources: React.RefObject<HTMLElement> | React.RefObject<HTMLElement>[],\n  onResize: ResizeObserverCallback\n) => {\n  const handleResize = useCallbackRef(onResize);\n\n  React.useLayoutEffect(() => {\n    const resizeObs = new ResizeObserver(handleResize);\n\n    if (Array.isArray(sources)) {\n      sources.forEach((source) => {\n        if (source.current) {\n          resizeObs.observe(source.current);\n        }\n      });\n    } else if (sources.current) {\n      resizeObs.observe(sources.current);\n    }\n\n    return () => {\n      resizeObs.disconnect();\n    };\n  }, [sources, handleResize]);\n};\n\nexport type { HeaderLayoutProps, BaseHeaderLayoutProps };\nexport { HeaderLayout, BaseHeaderLayout };\n"],"names":["BaseHeaderLayout","React","forwardRef","navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width","props","ref","isMobile","useIsMobile","isSubtitleString","_jsx","Box","display","paddingLeft","paddingRight","paddingTop","paddingBottom","position","top","background","shadow","zIndex","minHeight","initial","HEIGHT_TOP_NAVIGATION","medium","HEIGHT_TOP_NAVIGATION_MEDIUM","data-strapi-header-sticky","_jsxs","Flex","alignItems","justifyContent","wrap","Typography","variant","tag","textColor","undefined","RESPONSIVE_DEFAULT_SPACING","large","data-strapi-header","direction","gap","_Fragment","minWidth","style","wordBreak","overflowWrap","maxWidth","marginLeft","HeaderLayout","baseHeaderLayoutRef","useRef","headerSize","setHeaderSize","useState","isVisible","setIsVisible","deviceType","useDeviceType","containerRef","useElementOnScreen","root","rootMargin","threshold","useResizeObserver","headerContainer","current","newSize","getBoundingClientRect","prevSize","height","useEffect","div","displayName","sources","onResize","handleResize","useCallbackRef","useLayoutEffect","resizeObs","ResizeObserver","Array","isArray","forEach","source","observe","disconnect"],"mappings":"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"}