'use strict';

var jsxRuntime = require('react/jsx-runtime');
var designSystem = require('@strapi/design-system');
var icons = require('@strapi/icons');
var reactIntl = require('react-intl');
var styledComponents = require('styled-components');
var enums = require('../../../enums.js');
var files = require('../../../utils/files.js');
var getAssetIcon = require('../../../utils/getAssetIcon.js');
var translations = require('../../../utils/translations.js');

/* -------------------------------------------------------------------------------------------------
 * AssetsGrid
 * -----------------------------------------------------------------------------------------------*/ const StyledCard = styledComponents.styled(designSystem.Card)`
  border: 1px solid ${({ theme })=>theme.colors.neutral200};
  border-radius: 8px;
  overflow: hidden;
`;
/* -------------------------------------------------------------------------------------------------
 * AssetPreview
 * -----------------------------------------------------------------------------------------------*/ const PreviewContainer = styledComponents.styled(designSystem.Box)`
  position: relative;
  width: 100%;
  padding-bottom: 62.5%;
  height: 0;
  overflow: hidden;
  background: repeating-conic-gradient(
      ${({ theme })=>theme.colors.neutral100} 0% 25%,
      transparent 0% 50%
    )
    50% / 20px 20px;
`;
const StyledImage = styledComponents.styled.img`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
`;
const IconPreview = styledComponents.styled(designSystem.Flex)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  color: ${({ theme })=>theme.colors.neutral500};
  background: ${({ theme })=>theme.colors.neutral100};
`;
const AssetPreview = ({ asset })=>{
    const { alternativeText, ext, formats, mime, url } = asset;
    if (mime?.includes(enums.AssetType.Image)) {
        const mediaURL = files.prefixFileUrlWithBackendUrl(formats?.thumbnail?.url) ?? files.prefixFileUrlWithBackendUrl(url);
        if (mediaURL) {
            return /*#__PURE__*/ jsxRuntime.jsx(PreviewContainer, {
                children: /*#__PURE__*/ jsxRuntime.jsx(StyledImage, {
                    src: mediaURL,
                    alt: alternativeText || ''
                })
            });
        }
    }
    const DocIcon = getAssetIcon.getAssetIcon(mime, ext);
    return /*#__PURE__*/ jsxRuntime.jsx(PreviewContainer, {
        children: /*#__PURE__*/ jsxRuntime.jsx(IconPreview, {
            justifyContent: "center",
            alignItems: "center",
            children: /*#__PURE__*/ jsxRuntime.jsx(DocIcon, {
                width: 48,
                height: 48
            })
        })
    });
};
/* -------------------------------------------------------------------------------------------------
 * AssetCard
 * -----------------------------------------------------------------------------------------------*/ const StyledCardHeader = styledComponents.styled(designSystem.CardHeader)`
  border-bottom: none;
`;
const CardFooter = styledComponents.styled(designSystem.Flex)`
  min-width: 0;
`;
const FileTypeIcon = styledComponents.styled(designSystem.Flex)`
  color: ${({ theme })=>theme.colors.neutral600};
  flex-shrink: 0;
`;
const FileName = styledComponents.styled(designSystem.Typography)`
  flex: 1;
  min-width: 0;
`;
const AssetCard = ({ asset })=>{
    const { formatMessage } = reactIntl.useIntl();
    const TypeIcon = getAssetIcon.getAssetIcon(asset.mime, asset.ext);
    return /*#__PURE__*/ jsxRuntime.jsxs(StyledCard, {
        children: [
            /*#__PURE__*/ jsxRuntime.jsx(StyledCardHeader, {
                children: /*#__PURE__*/ jsxRuntime.jsx(AssetPreview, {
                    asset: asset
                })
            }),
            /*#__PURE__*/ jsxRuntime.jsx(designSystem.CardBody, {
                children: /*#__PURE__*/ jsxRuntime.jsxs(CardFooter, {
                    alignItems: "center",
                    gap: 2,
                    paddingTop: 2,
                    children: [
                        /*#__PURE__*/ jsxRuntime.jsx(FileTypeIcon, {
                            children: /*#__PURE__*/ jsxRuntime.jsx(TypeIcon, {
                                width: 16,
                                height: 16
                            })
                        }),
                        /*#__PURE__*/ jsxRuntime.jsx(FileName, {
                            textColor: "primary800",
                            ellipsis: true,
                            children: asset.name
                        }),
                        /*#__PURE__*/ jsxRuntime.jsx(designSystem.IconButton, {
                            label: formatMessage({
                                id: translations.getTranslationKey('control-card.more-actions'),
                                defaultMessage: 'More actions'
                            }),
                            variant: "ghost",
                            children: /*#__PURE__*/ jsxRuntime.jsx(icons.More, {})
                        })
                    ]
                })
            })
        ]
    });
};
const AssetsGrid = ({ assets })=>{
    const { formatMessage } = reactIntl.useIntl();
    if (assets.length === 0) {
        return /*#__PURE__*/ jsxRuntime.jsx(designSystem.Box, {
            padding: 8,
            children: /*#__PURE__*/ jsxRuntime.jsx(designSystem.Typography, {
                textColor: "neutral600",
                children: formatMessage({
                    id: 'app.components.EmptyStateLayout.content-document',
                    defaultMessage: 'No content found'
                })
            })
        });
    }
    return /*#__PURE__*/ jsxRuntime.jsx(designSystem.Grid.Root, {
        gap: 4,
        children: assets.map((asset)=>/*#__PURE__*/ jsxRuntime.jsx(designSystem.Grid.Item, {
                col: 3,
                m: 4,
                s: 6,
                xs: 12,
                direction: "column",
                alignItems: "stretch",
                children: /*#__PURE__*/ jsxRuntime.jsx(AssetCard, {
                    asset: asset
                })
            }, asset.id))
    });
};

exports.AssetsGrid = AssetsGrid;
//# sourceMappingURL=AssetsGrid.js.map
